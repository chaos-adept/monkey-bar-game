<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <h1> monkey tournament game </h1>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        var playerTurnHash = 0;
        var socket = io('http://localhost:3001');
        socket.on('connect', function(){ console.log('connected'); updateStatus('connected'); });
        socket.on('event', function(data){ console.log('event', data); });
        socket.on('disconnect', function(){ console.log('disconnected'); updateStatus('disconnected'); });
        socket.on('welcome', function (playerId) { updateStatus('registered ' + playerId) });


        function onRegister(event) {
            var playerId = document.getElementById('playerId').value;
            socket.emit('register', playerId);
        }

        function onAttempt(event) {
            var value = +document.getElementById('attempt').value;
            socket.emit('turn', { value: value, turnHash: ++playerTurnHash });
        }

        function updateStatus(newStatus) {
            document.getElementById('status').innerText = newStatus;
        }
    </script>

    <input id="playerId" placeholder="playerId"/>
    <button onclick="onRegister(event)">register</button>
    <input id="attempt" placeholder="command body (json)" type="number" value="0" />
    <button onclick="onAttempt(event)">turn</button>
    <span id="status"></span>
</body>
</html>